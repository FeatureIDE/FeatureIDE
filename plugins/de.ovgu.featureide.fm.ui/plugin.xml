<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
	<extension-point id="de.ovgu.featureide.fm.ui.FeatureModelEditor" name="featuremodeleditor" schema="schema/de.ovgu.featureide.fm.ui.featuremodeleditor.exsd"/>
	<extension-point id="de.ovgu.fm.ui.views.outline.FmTreeContentProvider" name="FeatureModelTreeContentProvider" schema="schema/de.ovgu.fm.ui.views.outline.FmTreeContentProvider.exsd"/>
	<extension-point id="de.ovgu.fm.ui.outline.FmLabelProvider" name="FeatureModelLabelProvider" schema="schema/de.ovgu.fm.ui.outline.FmLabelProvider.exsd"/>
	<extension-point id="de.ovgu.featureide.fm.ui.FeatureDiagram" name="featurediagram" schema="schema/de.ovgu.featureide.fm.ui.FeatureDiagram.exsd"/>
	<extension-point id="de.ovgu.featureide.fm.ui.language" name="language" schema="schema/language.exsd"/>
	<extension-point id="de.ovgu.featureide.fm.ui.ConfigurationEditor" name="ConfigurationEditorExtension" schema="schema/de.ovgu.featureide.fm.ui.ConfigurationPage.exsd"/>
	<extension-point id="de.ovgu.featureide.fm.ui.Outline" name="FeatureIDE Outline" schema="schema/de.ovgu.featureide.fm.ui.Outline.exsd"/>

	<extension point="org.eclipse.core.contenttype.contentTypes">
		<content-type
        base-type="org.eclipse.core.runtime.text"
        file-extensions="config"
        id="de.ovgu.featureide.contenttype.conf"
        name="Configuration (for FeatureIDE projects)"
        priority="high">
		     <property
		           default="de.ovgu.featureide.fm.core.format.config.DefaultFormat"
		           name="de.ovgu.featureide.fm.ui.contentType.format">
		     </property>
		  </content-type>
		  <content-type
		        base-type="org.eclipse.core.runtime.text"
		        file-extensions="equation"
		        id="de.ovgu.featureide.contenttype.confEq"
		        name="Configuration (for FeatureIDE projects)"
		        priority="high">
		     <property
		           default="de.ovgu.featureide.fm.core.format.config.EquationFormat"
		           name="de.ovgu.featureide.fm.ui.contentType.format">
		     </property>
		  </content-type><content-type
		        base-type="org.eclipse.core.runtime.text"
		        file-extensions="expression"
		        id="de.ovgu.featureide.contenttype.confExp"
		        name="Configuration (for FeatureIDE projects)"
		        priority="high">
		     <property
		           default="de.ovgu.featureide.fm.core.format.config.ExpressionFormat"
		           name="de.ovgu.featureide.fm.ui.contentType.format">
		     </property>
		  </content-type>
		<content-type
				base-type="org.eclipse.core.runtime.xml"
				file-extensions="xml"
				id="de.ovgu.featureide.contenttype.confXML"
				name="XML Configuration (for FeatureIDE projects)"
				priority="high">
			<describer
					class="org.eclipse.core.runtime.content.XMLRootElementContentDescriber2">
				<parameter
						name="element"
						value="configuration">
				</parameter>
			</describer>
   <property
         default="de.ovgu.featureide.fm.core.format.config.XMLConfFormat"
         name="de.ovgu.featureide.fm.ui.contentType.format">
   </property>
		</content-type>
		<content-type
				base-type="org.eclipse.core.runtime.text"
				file-extensions="config"
				id="de.ovgu.featureide.contenttype.extConf"
				name="Configuration (for non-FeatureIDE projects)"
				priority="low">
		</content-type>
		<content-type
				base-type="org.eclipse.core.runtime.text"
				file-extensions="equation"
				id="de.ovgu.featureide.contenttype.extConfE"
				name="Equation (for non-FeatureIDE projects)"
				priority="low">
		</content-type>
		<content-type
				base-type="org.eclipse.core.runtime.text"
				file-extensions="expression"
				id="de.ovgu.featureide.contenttype.expression"
				name="Expression (for non-FeatureIDE projects)"
				priority="low">
		</content-type>
		<content-type
		        base-type="org.eclipse.core.runtime.text"
		        file-extensions="velvet"
		        id="de.ovgu.featureide.fm.ui.extendedfeatureModel"
		        name="Extended Feature Model"
		        priority="high">
		   <property
		         default="de.ovgu.featureide.fm.core.format.fm.VelvetFeatureModelFormat"
		         name="de.ovgu.featureide.fm.ui.contentType.format">
		   </property>
		</content-type>
  <content-type
        base-type="org.eclipse.core.runtime.xml"
        describer="de.ovgu.featureide.fm.ui.editors.XMLFeatureModelContentDescriber"
        file-extensions="xml"
        id="de.ovgu.featureide.fm.ui.XMLFeatureModel"
        name="XMLFeatureModel"
        priority="high">
     <describer
           class="de.ovgu.featureide.fm.ui.editors.XMLFeatureModelContentDescriber">
     </describer>
  </content-type>
	</extension>

	<extension
			id="modelProblemMarker"
			name="Model Problem Marker"
			point="org.eclipse.core.resources.markers">
		<super type="org.eclipse.core.resources.problemmarker"/>
		<persistent value="true"/>
	</extension>
	<extension
			point="de.ovgu.featureide.fm.ui.language">
		<language
				class="de.ovgu.featureide.fm.ui.properties.language.English"
				id="english"
				name="english">
		</language>
	</extension>
	<extension
			point="de.ovgu.featureide.fm.ui.language">
		<language
				class="de.ovgu.featureide.fm.ui.properties.language.German"
				id="german"
				name="german">
		</language>
	</extension>

	<extension
			point="org.eclipse.ui.editors">
		<editor
				class="de.ovgu.featureide.fm.ui.editors.FeatureModelEditor"
				contributorClass="de.ovgu.featureide.fm.ui.editors.featuremodel.FeatureModelEditorContributor"
				default="true"
				icon="icons/featuretree.ico"
				id="de.ovgu.featureide.fm.ui.editors.FeatureModelEditor"
				name="Feature Model Editor">
			<contentTypeBinding
					contentTypeId="de.ovgu.featureide.fm.ui.XMLFeatureModel">
			</contentTypeBinding>
			<contentTypeBinding
					contentTypeId="de.ovgu.featureide.fm.ui.extendedfeatureModel">
			</contentTypeBinding>
		</editor>
		<editor
				class="de.ovgu.featureide.fm.ui.editors.configuration.ConfigurationEditor"
				default="true"
				extensions="conf,config,equation,expression"
				icon="icons/ConfigurationIcon.png"
				id="de.ovgu.featureide.fm.ui.editors.configuration.ConfigurationEditor"
				name="Configuration Editor">
			<contentTypeBinding
					contentTypeId="de.ovgu.featureide.contenttype.conf">
			</contentTypeBinding>
			<contentTypeBinding
					contentTypeId="de.ovgu.featureide.contenttype.confXML">
			</contentTypeBinding>
		</editor>
	</extension>

	<extension
			point="org.eclipse.ui.views">
		<category
				id="FeatureIDE"
				name="FeatureIDE"/>
		<view
				category="FeatureIDE"
				class="de.ovgu.featureide.fm.ui.views.FeatureModelEditView"
				icon="icons/FeatureIconSmall.ico"
				id="de.ovgu.featureide.fm.ui.views.FeatureModelEditView"
				name="Feature Model Edits"/>
		<view
				category="FeatureIDE"
				class="de.ovgu.featureide.fm.ui.views.outline.custom.Outline"
				icon="icons/FeatureIconSmall.ico"
				id="de.ovgu.featureide.ui.views.collaboration.outline.CollaborationOutline"
				name="FeatureIDE Outline"
				restorable="true">
		</view>
	</extension>
	<extension
			point="org.eclipse.ui.propertyPages">
		<page
				class="de.ovgu.featureide.fm.ui.properties.page.FMPropertyPage"
				id="de.ovgu.featureide.fm.ui.propertypage"
				name="Feature Model Editor"
				nameFilter="*.xml">
		</page>
	</extension>
	<extension
			point="org.eclipse.ui.preferencePages">
		<page
				class="de.ovgu.featureide.fm.ui.preferences.FeatureIDEPreferencePage"
				id="de.ovgu.featureide.fm.ui.FeatureIDEPreferencePage"
				name="FeatureIDE">
		</page>
	</extension>
	<extension
			point="org.eclipse.ui.menus">
		<menuContribution
				allPopups="false"
				locationURI="popup:org.eclipse.ui.popup.any?before=additions">
			<separator
					name="de.ovgu.featureide.fm.ui.menus.beforeSeparator"
					visible="true">
			</separator>
			<menu
					icon="icons/FeatureIconSmall.ico"
					id="de.ovgu.featureide.fm.ui.menus.popupMenu"
					label="FeatureIDE">

				<separator
						name="de.ovgu.featureide.fm.ui.menus.popupMenu.submenus"
						visible="true">
				</separator>
    <visibleWhen
          checkEnabled="false">
			<with
                 variable="activeMenuSelection">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <and>
                    <test
                          args="de.ovgu.featureide.core.featureProjectNature"
                          property="de.ovgu.featureide.fm.ui.properties.nature"
                          value="true">
                    </test>
                 </and>
              </iterate>
           </with>
    </visibleWhen>
			</menu>
		</menuContribution>
		<menuContribution
				allPopups="false"
				locationURI="popup:de.ovgu.featureide.fm.ui.menus.popupMenu?after=de.ovgu.featureide.fm.ui.menus.popupMenu.submenus">
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.openWithGuidsl"
					icon="icons/guidsl.gif"
					id="de.ovgu.featureide.fm.ui.actions.openWithGuidsl"
					label="Open with GUIDSL"
					style="push"
					tooltip="GUIDSL is a configuration tool written by Don Batory">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
					</reference>
				</visibleWhen>
			</command>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.AnalyzeVelvet"
					icon="icons/FeatureIconSmall.ico"
					id="de.ovgu.featureide.fm.ui.actions.AnalyzeVelvet"
					label="Analyze Velvet Model"
					style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsVelvet">
					</reference>
				</visibleWhen>
			</command>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.FeatureModelSlicing"
					icon="icons/featuretree.ico"
					id="de.ovgu.featureide.fm.ui.actions.FeatureModelSicing"
					label="Slice Feature Model"
					style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
					</reference>
				</visibleWhen>
			</command>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.EliminateComplexConstraints"
					icon="icons/featuretree.ico"
					id="de.ovgu.featureide.fm.ui.actions.EliminateComplexConstraints"
					label="Product-Equivalent Model with Simple Constraints"
					style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
					</reference>
				</visibleWhen>
			</command>
			<separator
					name="de.ovgu.featureide.fm.ui.separator4"
					visible="true">
			</separator>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.FMImport"
					icon="icons/import_wiz.gif"
					id="de.ovgu.featureide.fm.ui.actions.FMImport"
					label="Import Feature Model"
					style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
					</reference>
				</visibleWhen>
			</command>
   <separator
         name="de.ovgu.featureide.fm.ui.separator5"
         visible="true">
   </separator>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.FMExport"
					icon="icons/export_wiz.gif"
					id="de.ovgu.featureide.fm.ui.actions.FMExport"
					label="Export Feature Model"
					style="push">
				<visibleWhen
						checkEnabled="false">
			          <reference
								definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
			          </reference>
				</visibleWhen>
			</command>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.FeatureObfuscator"
					icon="icons/export_wiz.gif"
					id="de.ovgu.featureide.fm.ui.actions.FeatureObfuscator"
					label="Export Obfuscated Feature Model"
					style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
					</reference>
				</visibleWhen>
			</command>
			<command
					commandId="de.ovgu.featureide.fm.ui.commands.FeatureDependencies"
					icon="icons/export_wiz.gif"
					id="de.ovgu.featureide.fm.ui.actions.FeatureDependencies"
					label="Export Feature Dependency Information"
					style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
					</reference>
				</visibleWhen>
			</command>
			<command
         commandId="de.ovgu.featureide.fm.ui.commands.Convert"
         icon="icons/export_wiz.gif"
         id="de.ovgu.featureide.fm.ui.actions.Convert"
         label="Export All Feature Models"
         style="push">
				<visibleWhen
						checkEnabled="false">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.containsFeatureModelFolder">
					</reference>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	<extension
			point="org.eclipse.ui.commands">
		<command
				id="de.ovgu.featureide.fm.ui.commands.Convert"
				name="Convert Feature Models">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.AnalyzeVelvet"
				name="Analyze Velvet Model">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.FeatureDependencies"
				name="Export feature dependency information">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.FeatureObfuscator"
				name="Export obfuscated feature model">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.FMImport"
				name="Import feature model">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.FMExport"
				name="Export feature model">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.openWithGuidsl"
				name="Open with GUIDSL">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.FeatureModelSlicing"
				name="Feature Model Slicing">
		</command>
		<command
				id="de.ovgu.featureide.fm.ui.commands.EliminateComplexConstraints"
				name="Eliminate complex constraints">
		</command>
	</extension>
	<extension
			point="org.eclipse.ui.handlers">
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.FeatureModelSlicingHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.FeatureModelSlicing">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.FeatureModelConversionHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.Convert">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.AnalyzeVelvetHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.AnalyzeVelvet">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.FeatureDependenciesHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.FeatureDependencies">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.ObfuscatorHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.FeatureObfuscator">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.ImportHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.FMImport">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.FMExportHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.FMExport">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.OpenWithGUIDSLHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.openWithGuidsl">
		</handler>
		<handler
				class="de.ovgu.featureide.fm.ui.handlers.EliminateComplexConstraintsHandler"
				commandId="de.ovgu.featureide.fm.ui.commands.EliminateComplexConstraints">
		</handler>
	</extension>
	<extension
			point="org.eclipse.core.expressions.definitions">
		<definition
				id="de.ovgu.featureide.ui.expressions.containsResource">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="or">
					<test
							property="de.ovgu.featureide.fm.ui.properties.class"
							value="org.eclipse.core.resources.IResource">
					</test>
				</iterate>
			</with>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.containsFolder">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="or">
					<test
							property="de.ovgu.featureide.fm.ui.properties.class"
							value="org.eclipse.core.resources.IContainer">
					</test>
				</iterate>
			</with>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.isFeatureModel">
			<adapt type="org.eclipse.core.resources.IResource">
               <test
					property="de.ovgu.featureide.fm.ui.properties.featuremodel">
				</test>
			</adapt>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.isConfiguration">
			<adapt type="org.eclipse.core.resources.IResource">
               <test
					property="de.ovgu.featureide.fm.ui.properties.configuration">
				</test>
			</adapt>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.containsConfiguration">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="or">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.isConfiguration">
					</reference>

				</iterate>
			</with>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.containsFeatureModel">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="or">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.isFeatureModel">
					</reference>

				</iterate>
			</with>
		</definition>
				<definition
				id="de.ovgu.featureide.fm.ui.expressions.containsOnlyConfiguration">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="and">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.isConfiguration">
					</reference>

				</iterate>
			</with>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.containsOnlyFeatureModel">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="and">
					<reference
							definitionId="de.ovgu.featureide.fm.ui.expressions.isFeatureModel">
					</reference>

				</iterate>
			</with>
		</definition>
		<definition
				id="de.ovgu.featureide.fm.ui.expressions.containsVelvet">
			<with
					variable="activeMenuSelection">
				<iterate
						ifEmpty="false"
						operator="or">
					<test
							args=".velvet"
							property="de.ovgu.featureide.fm.ui.properties.file">
					</test>
				</iterate>
			</with>
		</definition>
  <definition
        id="de.ovgu.featureide.fm.ui.expressions.containsFeatureModelFolder">
     <with
           variable="activeMenuSelection">
        <iterate
              ifEmpty="false"
              operator="or">
           <test
                 property="de.ovgu.featureide.fm.ui.properties.featureModelFolder">
           </test>
        </iterate>
     </with>
  </definition>
	</extension>
	<extension
			point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
				class="de.ovgu.featureide.fm.ui.properties.FileTester"
				id="de.ovgu.featureide.fm.ui.propertytester.file"
				namespace="de.ovgu.featureide.fm.ui.properties"
				properties="file"
				type="java.lang.Object">
		</propertyTester>
		<propertyTester
				class="de.ovgu.featureide.fm.ui.properties.ClassTester"
				id="de.ovgu.featureide.fm.ui.propertytester.class"
				namespace="de.ovgu.featureide.fm.ui.properties"
				properties="class"
				type="java.lang.Object">
		</propertyTester>
		<propertyTester
				class="de.ovgu.featureide.fm.ui.properties.NatureTester"
				id="de.ovgu.featureide.fm.ui.propertytester.nature"
				namespace="de.ovgu.featureide.fm.ui.properties"
				properties="nature"
				type="java.lang.Object">
		</propertyTester>
		<propertyTester
				class="de.ovgu.featureide.fm.ui.properties.FormatTester"
				id="de.ovgu.featureide.fm.ui.propertytester.format"
				namespace="de.ovgu.featureide.fm.ui.properties"
				properties="featuremodel,configuration"
				type="java.lang.Object">
		</propertyTester>
  <propertyTester
        class="de.ovgu.featureide.fm.ui.properties.FormatFolderTester"
        id="de.ovgu.featureide.fm.ui.propertytester.formatFolder"
        namespace="de.ovgu.featureide.fm.ui.properties"
        properties="featureModelFolder,configurationFolder"
        type="java.lang.Object">
  </propertyTester>
	</extension>
	<extension
			point="de.ovgu.featureide.fm.ui.Outline">
		<Outline
				OutlineProvider="de.ovgu.featureide.fm.ui.views.outline.custom.providers.FMOutlineProvider">
		</Outline>
	</extension>
</plugin>
